{% set components = ['carousel', 'animation', 'accordion', 'autocomplete'] %}

<article class="ap-components-showcase">
  <div class="ap-components-showcase-buttons" role="list">
    <button [class]="carouselVisibility ? 'ap-button' : 'ap-button --inactive' " on="tap:AMP.setState({carouselVisibility: true, animationVisibility: false, accordionVisibility: false, autocompleteVisibility: false})" class="ap-button">{{ _('Carousel') }}</button>
    <button [class]="animationVisibility ? 'ap-button' : 'ap-button --inactive'" on="tap:AMP.setState({carouselVisibility: false, animationVisibility: true, accordionVisibility: false, autocompleteVisibility: false})" class="ap-button --inactive">{{ _('Animation') }}</button>
    <button [class]="accordionVisibility ? 'ap-button' : 'ap-button --inactive'" on="tap:AMP.setState({carouselVisibility: false, animationVisibility: false, accordionVisibility: true, autocompleteVisibility: false})" class="ap-button --inactive">{{ _('Accordion') }}</button>
    <button [class]="autocompleteVisibility ? 'ap-button' : 'ap-button --inactive'" on="tap:AMP.setState({carouselVisibility: false, animationVisibility: false, accordionVisibility: false, autocompleteVisibility: true})" class="ap-button --inactive">{{ _('Autocomplete') }}</button>
  </div>

  <div class="ap-components-showcase-demos">  
    {%for component in components %}
    {%set visibilityName = component ~ "Visibility" %}
    {%set componentLink = "/shared/components-showcase/amp-" ~ component ~ ".html" %}
    {%set componentBind = visibilityName ~ " ? 'ap-components-showcase-demo --"~component ~ " show' : 'hide' " %}
    {%set componentDoc = g.doc('/content/amp-dev/documentation/components/amp-'~component, locale=doc.locale).url.path %}
    {%if component == components[0] %}
      {%set componentClass = "ap-components-showcase-demo --" ~component~ " show" %}
    {% else %}
    {%set componentClass = "hide" %}
    {%endif%}

    <div [class]="{{componentBind | safe }}" class="{{componentClass | safe}}">
      <div class="ap-components-showcase-demo-code" title={{"amp-"~component}}>
        <div class="ap-code-snippet">
          {% set code_snippet = g.doc(componentLink).content %}
          {{ doc.pod.markdown.convert('```html\n' + code_snippet + '\n```')|safe }}
        </div>
      </div>

      <div class="ap-components-showcase-demo-ui {{component | safe}}" title={{"<amp-"~component~">"}}>

      {%if component == 'animation' %}
        <div class="rotate-image-window">
          <amp-img id="animatedImage" width="450" height="300" layout="responsive" src="/static/samples/img/elephant.jpg" alt="Picture of an elephant"></amp-img>
          <button on="tap:scaleUpImage.start" class="ap-button">Click to scale up the image</button>
        </div>
      {%endif%}

        <!-- Styled demo here -->
        {{ code_snippet|safe }}
      </div>
      <a href="{{componentDoc | safe}}" class="ap-m-lnk grap-lnk">
        <div class="ap-a-ico ap-m-lnk-icon">
          {% do doc.icons.useIcon('icons/internal.svg') %}
          <svg><use xmlns:xlink="http://www.w3.org/1999/xlink" xlink:href="#internal"></use></svg>
        </div>
        <span class="ap-m-lnk-text">All about this component</span>
      </a>
    </div>
    {%endfor%}
  </div>
</article>